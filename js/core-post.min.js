!function(){var wh_app=new Vue({el:"#wpbody",data:wh_app_data,methods:{changeTheme:function(){var vue=this;Vue.nextTick(function(){vue.editor.setOption("theme",vue.forms.theme.theme)})},saveTheme:function(){this.formAjax(this.forms.theme,function(r){return!0})},getPreview:function(){var vue=this,iframe=document.getElementById("wh-modal--template");iframe.contentWindow.contents='<html style="background-color: #f1f1f1; padding: 20px; "><body style="background-color: #fff; color: #444; text-align: center; font-size: 1rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif; max-width: 700px; box-shadow: 0 1px 3px rgba(0,0,0,0.13);"><div style="padding: 20px;">&hellip; Loading &hellip;</div></body></html>',iframe.src="javascript:window.contents",this.formAjax(this.forms.preview,function(r){r.data&&r.data.preview&&(iframe.contentWindow.contents=r.data.preview,iframe.src="javascript:window.contents"),r.data&&r.data.json&&(vue.forms.preview.data=r.data.json)})},showModal:function(){this.forms.preview.email=!1,this.modal=!0;var vue=this;Vue.nextTick(function(){vue.getPreview()})}},editor:null,mounted:function(){var vue=this;el=document.getElementById("wh-code"),el&&(this.editor=CodeMirror.fromTextArea(el,{lineNumbers:!0,matchBrackets:!0,indentWithTabs:!0,indentUnit:4,lineWrapping:!0,mode:{name:"handlebars",base:"text/html"},theme:vue.forms.theme.theme}),this.editor.on("change",function(cm){vue.forms.preview.template=cm.getValue()}))}});document.addEventListener("keyup",function(e){("key"in(e=e||window.event)&&("Escape"==e.key||"Esc"==e.key)||27==e.keyCode)&&(wh_app.modal=!1)})}();